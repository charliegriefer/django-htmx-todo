<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>To-Do List</title>
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>
    <link rel="stylesheet" href="{% static 'tasks/css/style.css' %}">
</head>
<body>
    <h1>Tasks</h1>

    <div id="messages-container" 
         hx-get="{% url 'messages' %}" 
         hx-trigger="messagesChanged from:body" 
         hx-swap="innerHTML">
        {% include "tasks/_messages.html" %}
    </div>

    <button 
        id="add-task-btn"
        hx-get="{% url 'task_form' %}" 
        hx-target="#task-form-container" 
        hx-swap="outerHTML">
        Add Task
    </button>

    <div id="task-form-container">
        <!-- Empty until "Add Task" is clicked -->
    </div>

    <table border="1">
        <thead>
            <tr>
                <th>Title</th>
                <th>Completed</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="task-table-body">
            {% for task in tasks %}
                {% include "tasks/_task_row.html" with task=task %}
            {% endfor %}
        </tbody>
    </table>
</body>
</html>